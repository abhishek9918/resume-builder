<!-- <h2 class="main-heading">
  Experience
</h2> -->

<div [formGroup]="parentForm">
  <div class="mb-6">
    <div class="flex items-center justify-between mb-2 pl-2">
      <h2 class="heading1">Tell us about your most recent job</h2>
      <button
        type="button"
        (click)="addExperience()"
        aria-label="Add experience"
        class="btn-primary"
      >
        <fa-icon [icon]="faPlus"></fa-icon>Add
      </button>
    </div>
    <p class="text-info">
      Think volunteer work or impactful projectsâ€”start with your most recent.
      Everything counts!
    </p>
  </div>

  <ng-container formArrayName="experiencesArray">
    <ng-container
      *ngFor="let experience of experiencesArray.controls; let i = index"
    >
      <ng-container [formGroupName]="i">
        <div class="space-y-6 mb-8">
          <div class="experience-card">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="input-label">Company</label>
                <input
                  type="text"
                  formControlName="company"
                  placeholder="Tech Corp"
                  class="input-field"
                />
                <div
                  *ngIf="
                    experience.get('company')?.touched &&
                    experience.get('company')?.invalid
                  "
                  class="errorMsg"
                >
                  Company is required.
                </div>
              </div>
              <div>
                <label class="input-label">Position</label>
                <input
                  formControlName="position"
                  type="text"
                  placeholder="Senior Developer"
                  class="input-field"
                />
                <div
                  *ngIf="
                    experience.get('position')?.touched &&
                    experience.get('position')?.invalid
                  "
                  class="errorMsg"
                >
                  Position is required.
                </div>
              </div>
              <div>
                <label class="input-label">Start Date</label>
                <input
                  formControlName="startDate"
                  type="date"
                  class="input-field"
                />
                <div
                  *ngIf="
                    experience.get('startDate')?.touched &&
                    experience.get('startDate')?.invalid
                  "
                  class="errorMsg"
                >
                  Start Date is required.
                </div>
              </div>
              <div>
                <label class="input-label">End Date</label>
                <input
                  formControlName="endDate"
                  type="date"
                  class="input-field"
                />
              </div>
              <div class="md:col-span-2">
                <label class="input-label">Summary / Achievements</label>
                <textarea
                  formControlName="description"
                  rows="3"
                  placeholder="Led a team of developers to build scalable web applications..."
                  class="input-field"
                ></textarea>
                <div
                  *ngIf="
                    experience.get('description')?.touched &&
                    experience.get('description')?.invalid
                  "
                  class="errorMsg"
                >
                  <div
                    *ngIf="experience.get('description')?.errors?.['required']"
                  >
                    Description is required.
                  </div>
                  <div
                    *ngIf="experience.get('description')?.errors?.['minlength']"
                  >
                    Description must be at least 20 characters.
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-6 text-right" *ngIf="i > 0">
              <button
                type="button"
                (click)="removeExperience(i)"
                class="btn-danger"
                aria-label="Remove experience"
              >
                <fa-icon [icon]="faMinus" class="mr-1"></fa-icon>
                Remove
              </button>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </ng-container>
</div>
