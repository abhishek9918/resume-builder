<div
  class="grid grid-cols-1 gap-8 sm:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5"
  @shouldAnimateList
>
  <ng-container
    *ngFor="let resume of resumes; let i = index; trackBy: trackByResumeId"
  >
    <button
      type="button"
      aria-haspopup="menu"
      aria-expanded="false"
      data-state="closed"
      class="custom-card-button"
      [@cardAnimation]="getAnimationDelay(i)"
    >
      <div class="transform-wrapper" (click)="openModal(i)">
        <div class="card-inner">
          <div class="card-info">
            <h4 class="card-title line-clamp-2">{{ resume.resumeName }}</h4>
            <p class="card-subtitle line-clamp-1">
              Last updated {{ resume.createdAt }}
            </p>
          </div>
          <img
            src="https://images.unsplash.com/photo-1528459199957-0ff28496a7f6?q=80&w=743&auto=format&fit=crop"
            alt="rhyhorn"
            class="card-image"
          />
        </div>
        <div class="glare-wrapper">
          <div class="glare"></div>
        </div>
      </div>
      <div
        *ngIf="openedCardIndex === i"
        class="absolute popup rounded border border-gray-100/20 constant-bg !my-theme left-4 z-[9999] min-w-[8rem]"
        [ngClass]="{
          'top-full mt-2': !(isSmallScreen() && i === resumes.length - 1),
          'bottom-full mb-2': isSmallScreen() && i === resumes.length - 1
        }"
      >
        <div class="p-1 text-gray-200">
          <div
            (click)="actions('Open', resume)"
            class="px-2 py-1.5 text-sm hover:bg-gray-600 rounded cursor-pointer"
          >
            Open
          </div>
          <div
            (click)="actions('Rename', resume)"
            class="px-2 py-1.5 text-sm hover:bg-gray-600 rounded cursor-pointer"
          >
            Rename
          </div>
          <div
            (click)="actions('Duplicate', resume)"
            class="px-2 py-1.5 text-sm hover:bg-gray-600 rounded cursor-pointer"
          >
            Duplicate
          </div>
          <div
            (click)="actions('Lock', resume)"
            class="px-2 py-1.5 text-sm hover:bg-gray-600 rounded cursor-pointer"
          >
            Lock
          </div>
          <div class="-mx-1 my-1 h-px bg-gray-600"></div>
          <div
            (click)="actions('Delete', resume)"
            class="px-2 py-1.5 text-sm hover:bg-gray-600 rounded cursor-pointer"
          >
            Delete
          </div>
        </div>
      </div>
    </button>
  </ng-container>
</div>

<app-common-modal #modalOpen></app-common-modal>
<app-delete-modal #deleteModal></app-delete-modal>
