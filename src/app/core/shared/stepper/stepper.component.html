<div class="flex flex-col items-center w-full">
  <div
    class="relative w-full max-w-4xl px-4 sm:px-6 lg:px-8 flex items-center justify-center"
  >
    <div
      class="absolute top-8 left-[5%] right-[5%] sm:left-[10%] sm:right-[10%] h-1 rounded-full z-0 bg-gray-700"
    ></div>
    <div
      class="absolute top-8 left-[5%] sm:left-[10%] h-1 rounded-full z-10 transition-all duration-300"
      [ngStyle]="{ width: progressWidth, 'background-color': '#22C55E' }"
    ></div>

    <ng-container *ngFor="let step of steps; let i = index">
      <div
        class="flex flex-col items-center flex-1 z-20 min-w-[60px] sm:min-w-[80px]"
      >
        <div
          class="sm:h-10 sm:w-10 rounded-full flex items-center justify-center border-4 mt-4 transition-colors duration-300 select-none"
          [ngClass]="{
            'bg-[#22C55E] border-[#22C55E] text-[#E5E7EB] shadow-md':
              i < current,
            'bg-[#1F2937] border-[#22C55E] text-[#22C55E] ring-2 ring-[#1F2937] shadow-lg':
              i === current,
            'bg-[#374151] border-[#374151] text-[#6B7280] cursor-not-allowed shadow-sm':
              i > current
          }"
          (click)="i <= current + 1 ? goToStep(i) : null"
          [class.cursor-pointer]="i <= current + 1"
          [class.cursor-not-allowed]="i > current + 1"
          title="{{ step }}"
        >
          <span class="text-xs sm:text-sm font-medium">{{ i + 1 }}</span>
        </div>
        <div
          class="mt-2 text-xs sm:text-sm font-medium text-center select-none max-w-[80px] sm:max-w-[100px] break-words"
          [ngClass]="{
            'text-[#22C55E]': i <= current,
            'text-[#9CA3AF]': i > current
          }"
        >
          {{ step }}
        </div>
      </div>
    </ng-container>
  </div>
</div>
